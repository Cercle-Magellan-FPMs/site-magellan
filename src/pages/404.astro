---
import Layout from "@/layouts/Layout.astro";

const SITE_URL = "https://magellan.fpms.ac.be/";
const CONTACT = "FPMs.Magellan@umons.ac.be";

const title = "404 — Page introuvable / Not found";
const description = "La page demandée est introuvable — The requested page could not be found.";
---

<Layout title={title} description={description}>
  <main class="min-h-dvh bg-[#0b0f14] text-[#e6eef7] flex items-center justify-center px-6 py-16">
    <section class="w-full max-w-3xl rounded-2xl border border-white/10 bg-[#121822] shadow-xl p-6 md:p-10">
      <div class="flex justify-between items-start gap-4">
        <h1 class="text-3xl md:text-4xl font-bold tracking-tight">Oups, on s’est perdu…</h1>
        <img src="/logo-magellan.svg" alt="Cercle Magellan" class="h-7 opacity-90" />
      </div>

      <div class="mt-6 flex justify-center text-[#5cc8ff]">
        <!-- visuel léger -->
        <svg class="size-32 md:size-40 animate-[float_4s_ease-in-out_infinite]" viewBox="0 0 160 120" fill="none" aria-hidden="true">
          <circle cx="80" cy="60" r="45" stroke="currentColor" stroke-width="2" opacity=".25"/>
          <path d="M30 80 Q80 20 130 80" stroke="currentColor" stroke-width="2" fill="none" opacity=".35"/>
          <text x="50%" y="50%" text-anchor="middle" dominant-baseline="middle" font-size="28" font-weight="700" fill="currentColor">404</text>
        </svg>
      </div>

      <p class="mt-2 text-base text-[#9db1c7]">
        La page que tu cherches n’existe pas (ou plus). Si tu penses que c’est une erreur,
        <a href="#" id="report-fr" class="underline decoration-[#5cc8ff]/60 hover:decoration-[#5cc8ff]">signale‑le nous</a>.
      </p>

      <div class="mt-5 flex flex-wrap gap-3">
        <a href={SITE_URL} rel="nofollow" class="inline-flex items-center rounded-xl border border-[#5cc8ff]/30 bg-[#5cc8ff] px-4 py-2 font-semibold text-[#0a0f14] shadow hover:translate-y-[-1px] transition">
          Retour au site Magellan
        </a>
        <a id="mailto-fr" href={`mailto:${CONTACT}`} class="inline-flex items-center rounded-xl border border-white/15 bg-transparent px-4 py-2 font-semibold text-white/90 hover:bg-white/5 transition">
          Nous contacter
        </a>
      </div>

      <hr class="my-6 border-white/10"/>

      <div lang="en">
        <h2 class="text-xl font-semibold text-white/90">Whoops, we got lost…</h2>
        <p class="mt-2 text-[#9db1c7]">
          The page you’re looking for can’t be found. If you think this is a mistake,
          <a href="#" id="report-en" class="underline decoration-[#5cc8ff]/60 hover:decoration-[#5cc8ff]">let us know</a>.
        </p>
        <div class="mt-4 flex flex-wrap gap-3">
          <a href={SITE_URL} rel="nofollow" class="inline-flex items-center rounded-xl border border-[#5cc8ff]/30 bg-[#5cc8ff] px-4 py-2 font-semibold text-[#0a0f14] shadow hover:translate-y-[-1px] transition">
            Back to Magellan site
          </a>
          <a id="mailto-en" href={`mailto:${CONTACT}`} class="inline-flex items-center rounded-xl border border-white/15 bg-transparent px-4 py-2 font-semibold text-white/90 hover:bg-white/5 transition">
            Contact us
          </a>
        </div>
      </div>

      <p class="mt-6 text-sm text-white/70">
        Contact : <a href={`mailto:${CONTACT}`} class="underline decoration-white/30 hover:decoration-white">{CONTACT}</a>
      </p>
    </section>
  </main>

  <style is:global>
    @keyframes float { 0% { transform: translateY(0) } 50% { transform: translateY(-6px) } 100% { transform: translateY(0) } }
  </style>

  <script>
    // Prépare un mail "Signaler l’erreur" (FR & EN) avec métadonnées utiles
    const email = {CONTACT};
    const now = new Date().toISOString();
    const url = window.location.href;
    const ref = document.referrer || "(none)";
    const ua = navigator.userAgent;
    const lang = navigator.language || "fr";
    const viewport = `${window.innerWidth}x${window.innerHeight}`;

    const bodyFR = [
      "Bonjour l’équipe du Cercle info,",
      "",
      "Je pense être tombé sur une 404 en naviguant sur le site Magellan.",
      "",
      `• URL: ${url}`,
      `• Referer: ${ref}`,
      `• Horodatage: ${now}`,
      `• User-Agent: ${ua}`,
      `• Viewport: ${viewport}`,
      `• Langue: ${lang}`,
      "",
      "Contexte / étapes pour reproduire:",
      "- ",
      "",
      "Merci !"
    ].join("%0D%0A");

    const bodyEN = [
      "Hi Magellan team,",
      "",
      "I think I hit a 404 while browsing the Magellan site.",
      "",
      `• URL: ${url}`,
      `• Referrer: ${ref}`,
      `• Timestamp: ${now}`,
      `• User-Agent: ${ua}`,
      `• Viewport: ${viewport}`,
      `• Language: ${lang}`,
      "",
      "Context / steps to reproduce:",
      "- ",
      "",
      "Thanks!"
    ].join("%0D%0A");

    function mailto(subject, body){ return `mailto:${email}?subject=${encodeURIComponent(subject)}&body=${body}` }

    const hrefFR = mailto("Magellan — Signalement 404", bodyFR);
    const hrefEN = mailto("Magellan — 404 report", bodyEN);

    const rFR = document.getElementById("report-fr");
    const mFR = document.getElementById("mailto-fr");
    if (rFR) rFR.href = hrefFR;
    if (mFR) mFR.href = hrefFR;

    const rEN = document.getElementById("report-en");
    const mEN = document.getElementById("mailto-en");
    if (rEN) rEN.href = hrefEN;
    if (mEN) mEN.href = hrefEN;
  </script>
</Layout>
